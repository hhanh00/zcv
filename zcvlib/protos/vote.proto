syntax = "proto3";
package cash.z.vote.sdk.rpc;

message Empty {}

message VoteMessage {
    oneof type_oneof {
        Validator add_validator = 1;
        Election set_election = 2;
        uint32 start = 3;
        Ballot ballot = 4;
    }
}

message Validator {
    bytes pub_key = 1;
    uint32 power = 2;
}

message Election {
    string election = 1;
}

message VoteHeight {
    uint32 height = 1;
    bytes hash = 2;
}

message VoteRange {
    uint32 start = 1;
    uint32 end = 2;
}

message Ballot {
    uint32 height = 1;
    uint32 itx = 2;
    bytes ballot = 3;
}

message Hash {
    bytes hash = 1;
}

service VoteStreamer {
    rpc SetElection(Election) returns (Hash) {}
    rpc AddValidator(Validator) returns (Empty) {}
    rpc Start(Empty) returns (Empty) {}
    rpc GetLatestVoteHeight(Empty) returns (VoteHeight) {}
    rpc GetVoteRange(VoteRange) returns (stream Ballot) {}
    rpc SubmitVote(Ballot) returns (Hash) {}
}
